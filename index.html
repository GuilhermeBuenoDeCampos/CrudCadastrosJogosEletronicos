<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- Define a codificação de caracteres e a responsividade -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD de Jogo Eletrônico</title>
    <!-- Inclui o CSS do Bootstrap para estilização -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Inclui a fonte 'Press Start 2P' para um estilo gamer -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Estiliza o fundo com uma imagem gamer e garante que cubra toda a tela */
        body {
            background: url('https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
            background-size: cover;
            color: #ffffff;
            font-family: 'Press Start 2P', cursive;
        }
        /* Estiliza o container principal com fundo escuro e bordas neon */
        .container {
            background: rgba(0, 0, 0, 0.85);
            border: 3px solid #39ff14;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 0 25px rgba(57, 255, 20, 0.6), inset 0 0 15px rgba(57, 255, 20, 0.4);
            margin-top: 50px;
            max-width: 1000px;
        }
        /* Estiliza o título com cor neon verde e sombra brilhante */
        h1 {
            text-align: center;
            color: #39ff14;
            text-shadow: 0 0 10px #39ff14, 0 0 20px #39ff14;
            font-size: 2.5rem;
            letter-spacing: 3px;
            margin-bottom: 40px;
        }
        /* Estiliza os campos de entrada e seleção com fundo escuro e bordas neon */
        .form-control, .form-select {
            background: rgba(10, 10, 20, 0.9);
            border: 2px solid #ff073a;
            color: #ff073a;
            border-radius: 8px;
            font-size: 0.9rem;
            padding: 10px;
            transition: all 0.3s;
        }
        /* Aplica efeitos de foco nos campos de entrada e seleção */
        .form-control:focus, .form-select:focus {
            background: rgba(20, 20, 30, 0.9);
            border-color: #39ff14;
            box-shadow: 0 0 12px #39ff14;
            color: #ff073a;
        }
        /* Estiliza o texto do contador de caracteres */
        .input-group-text {
            background: rgba(10, 10, 20, 0.9);
            border: 2px solid #ff073a;
            color: #ff073a;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        /* Estiliza o botão principal com gradiente neon */
        .btn-primary {
            background: linear-gradient(45deg, #ff073a, #39ff14);
            border: none;
            color: #000;
            font-size: 0.9rem;
            border-radius: 8px;
            padding: 12px 25px;
            transition: all 0.3s;
        }
        /* Efeito hover no botão principal */
        .btn-primary:hover {
            background: linear-gradient(45deg, #39ff14, #ff073a);
            box-shadow: 0 0 15px #39ff14;
        }
        /* Estiliza o botão de edição */
        .btn-warning {
            background: #ffd700;
            color: #000;
            font-size: 0.8rem;
            border-radius: 8px;
        }
        /* Efeito hover no botão de edição */
        .btn-warning:hover {
            background: #ffaa00;
            box-shadow: 0 0 10px #ffd700;
        }
        /* Estiliza o botão de exclusão */
        .btn-danger {
            background: #ff073a;
            color: #fff;
            font-size: 0.8rem;
            border-radius: 8px;
        }
        /* Efeito hover no botão de exclusão */
        .btn-danger:hover {
            background: #cc052e;
            box-shadow: 0 0 10px #ff073a;
        }
        /* Estiliza o botão de cancelar */
        .btn-secondary {
            background: #00b7eb;
            color: #000;
            font-size: 0.8rem;
            border-radius: 8px;
        }
        /* Efeito hover no botão de cancelar */
        .btn-secondary:hover {
            background: #0088b3;
            box-shadow: 0 0 10px #00b7eb;
        }
        /* Estiliza a tabela com fundo escuro e bordas neon */
        .table {
            background: rgba(10, 10, 20, 0.9);
            border: 2px solid #39ff14;
            border-radius: 12px;
            overflow: hidden;
        }
        /* Estiliza o cabeçalho da tabela */
        .table th {
            background: linear-gradient(45deg, #ff073a, #39ff14);
            color: #000;
            border: none;
            font-size: 0.9rem;
        }
        /* Estiliza as células da tabela */
        .table td {
            background: rgba(20, 20, 30, 0.9);
            border: none;
            color: #ff073a;
            font-size: 0.8rem;
        }
        /* Aplica listras na tabela para melhor legibilidade */
        .table-striped>tbody>tr:nth-of-type(odd)>td {
            background: rgba(30, 30, 40, 0.9);
        }
        /* Efeito hover nas linhas da tabela */
        .table-hover tbody tr:hover td {
            background: rgba(40, 40, 50, 0.9);
            transition: background 0.3s;
        }
        /* Estiliza os rótulos dos campos */
        .form-label {
            color: #39ff14;
            text-shadow: 0 0 5px #39ff14;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Container principal que contém o formulário e a tabela -->
    <div class="container">
        <!-- Título da aplicação -->
        <h1>Gerenciamento de Jogos Eletrônicos</h1>
        
        <!-- Formulário para adicionar ou editar jogos -->
        <form id="gameForm" class="mb-4">
            <!-- Campo para o título do jogo -->
            <div class="mb-3">
                <label for="title" class="form-label">Título</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="title" maxlength="100" required>
                    <span class="input-group-text" id="titleCount">0/100</span>
                </div>
            </div>
            <!-- Campo para a plataforma do jogo -->
            <div class="mb-3">
                <label for="platform" class="form-label">Plataforma</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="platform" maxlength="50">
                    <span class="input-group-text" id="platformCount">0/50</span>
                </div>
            </div>
            <!-- Campo para o ano de lançamento -->
            <div class="mb-3">
                <label for="year" class="form-label">Ano de Lançamento</label>
                <input type="number" class="form-control" id="year" min="1980" max="2025" required>
            </div>
            <!-- Campo para selecionar o gênero do jogo -->
            <div class="mb-3">
                <label for="genre" class="form-label">Gênero</label>
                <select class="form-select" id="genre" required>
                    <option value="">Selecione</option>
                    <option value="Ação">Ação</option>
                    <option value="Aventura">Aventura</option>
                    <option value="RPG">RPG</option>
                    <option value="Esporte">Esporte</option>
                </select>
            </div>
            <!-- Botão para adicionar ou atualizar jogo -->
            <button type="submit" class="btn btn-primary" id="submitBtn">Adicionar Jogo</button>
            <!-- Botão para cancelar edição, inicialmente oculto -->
            <button type="button" class="btn btn-secondary" id="cancelBtn" style="display:none;">Cancelar</button>
        </form>

        <!-- Tabela para exibir os jogos cadastrados -->
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Plataforma</th>
                    <th>Ano</th>
                    <th>Gênero</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="gameTableBody"></tbody>
        </table>
    </div>

    <!-- Inclui o JavaScript do Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Array para armazenar os jogos
        let games = [];
        // Índice do jogo sendo editado, -1 indica que não está editando
        let editIndex = -1;

        // Referências aos elementos do DOM
        const form = document.getElementById('gameForm');
        const submitBtn = document.getElementById('submitBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const gameTableBody = document.getElementById('gameTableBody');
        const titleInput = document.getElementById('title');
        const platformInput = document.getElementById('platform');
        const titleCount = document.getElementById('titleCount');
        const platformCount = document.getElementById('platformCount');

        // Função para atualizar a contagem de caracteres nos campos
        function updateCharCount(input, countElement, maxLength) {
            const length = input.value.length;
            countElement.textContent = `${length}/${maxLength}`;
        }

        // Adiciona eventos para atualizar a contagem de caracteres em tempo real
        titleInput.addEventListener('input', () => updateCharCount(titleInput, titleCount, 100));
        platformInput.addEventListener('input', () => updateCharCount(platformInput, platformCount, 50));

        // Carrega jogos salvos do localStorage
        function loadGames() {
            const savedGames = localStorage.getItem('games');
            if (savedGames) {
                games = JSON.parse(savedGames);
                renderTable();
            }
        }

        // Salva os jogos no localStorage
        function saveGames() {
            localStorage.setItem('games', JSON.stringify(games));
        }

        // Renderiza a tabela com os jogos cadastrados
        function renderTable() {
            gameTableBody.innerHTML = '';
            games.forEach((game, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${game.title}</td>
                    <td>${game.platform}</td>
                    <td>${game.year}</td>
                    <td>${game.genre}</td>
                    <td>
                        <button class="btn btn-sm btn-warning" onclick="editGame(${index})">Editar</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteGame(${index})">Excluir</button>
                    </td>
                `;
                gameTableBody.appendChild(row);
            });
        }

        // Manipula o envio do formulário para adicionar ou atualizar um jogo
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const title = titleInput.value;
            const platform = platformInput.value;
            const year = parseInt(document.getElementById('year').value);
            const genre = document.getElementById('genre').value;

            // Valida o ano de lançamento
            if (year < 1980 || year > 2025) {
                alert('Ano deve estar entre 1980 e 2025');
                return;
            }

            const game = { title, platform, year, genre };

            // Adiciona ou atualiza o jogo no array
            if (editIndex === -1) {
                games.push(game);
            } else {
                games[editIndex] = game;
                editIndex = -1;
                submitBtn.textContent = 'Adicionar Jogo';
                cancelBtn.style.display = 'none';
            }

            saveGames();
            renderTable();
            form.reset();
            updateCharCount(titleInput, titleCount, 100);
            updateCharCount(platformInput, platformCount, 50);
        });

        // Preenche o formulário com os dados do jogo para edição
        window.editGame = function(index) {
            const game = games[index];
            titleInput.value = game.title;
            platformInput.value = game.platform;
            document.getElementById('year').value = game.year;
            document.getElementById('genre').value = game.genre;
            
            updateCharCount(titleInput, titleCount, 100);
            updateCharCount(platformInput, platformCount, 50);
            
            editIndex = index;
            submitBtn.textContent = 'Atualizar Jogo';
            cancelBtn.style.display = 'inline-block';
        };

        // Cancela a edição e limpa o formulário
        cancelBtn.addEventListener('click', () => {
            form.reset();
            updateCharCount(titleInput, titleCount, 100);
            updateCharCount(platformInput, platformCount, 50);
            editIndex = -1;
            submitBtn.textContent = 'Adicionar Jogo';
            cancelBtn.style.display = 'none';
        });

        // Exclui um jogo do array
        window.deleteGame = function(index) {
            if (confirm('Tem certeza que deseja excluir este jogo?')) {
                games.splice(index, 1);
                saveGames();
                renderTable();
            }
        };

        // Inicializa a aplicação
        loadGames();
        updateCharCount(titleInput, titleCount, 100);
        updateCharCount(platformInput, platformCount, 50);
    </script>
</body>
</html>